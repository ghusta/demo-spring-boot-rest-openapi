= Demo project for Spring Boot + REST API + OpenAPI support
:toc:
:imagesdir: media/images

== Getting started

=== Start database

[source,shell]
----
docker run -d -p 5442:5432 ghusta/postgres-world-db:2.13
----

=== Start Spring Boot server

[source,shell]
----
mvn spring-boot:run
----

== OpenAPI artefacts

=== Open Swagger UI

* http://localhost:8080/api-docs/ui

=== Open OpenAPI spec

* http://localhost:8080/api-docs (JSON format)
* http://localhost:8080/api-docs.yaml (YAML format)

== Using an external Swagger UI instance

An external Swagger UI instance can be used to consume our OpenAPI spec.

Using Docker :

[source,bash]
----
docker run -d -p 8090:8080 -e URL=http://localhost:8080/api-docs swaggerapi/swagger-ui
----

NOTE: CORS is enabled by default in the Docker image, using the environment variable `CORS=true`.

The CORS configuration need to be updated in the API server, for example :

[source]
.application.properties
----
custom.external-swagger-ui.cors.allowed-origins=http://localhost:8090
----

== References

* OpenAPI
** https://www.openapis.org/
** https://spec.openapis.org/oas/v3.2.0.html[OpenAPI Specification v3.2.0]
** https://spec.openapis.org/oas/v3.1.0.html[OpenAPI Specification v3.1.0]
* Swagger UI
** https://swagger.io/tools/swagger-ui/[Swagger UI tool]
** https://hub.docker.com/r/swaggerapi/swagger-ui[Docker image for hosting Swagger UI]

== Books

* link:https://www.oreilly.com/library/view/designing-apis-with/9781617296284/[Designing APIs with Swagger and OpenAPI, window=_blank]

== Big picture

image::openapi_tooling_schema.png[caption="Figure 1: ",title="Creating and using OpenAPI definitions"]

Source: _Designing APIs with Swagger and OpenAPI_
